# sed 命令的学习

## sed可以做什么

## 基本使用

### 1. sed命令的使用格式
 
```shell
	sed [option] 'command' files
```

`option` : 参数选项，可选的，默认是

`command` ： 执行的命令

### 2. sed可以使用的命令

#### 1. `p`, 打印命令

`p`命令，打印命令，将读入的符合规则的行内容进行输出，默认是输出到屏幕上

规则可以是: 指定行，指定的几行，可以和正则表达式匹配的行

##### 使用示例：

1. 基本使用

	```
		sed -n 'p' example.txt
	```

2. 打印指定的行，**如何进行行定位**

	* 打印第十行的内容

	```shell
		sed -n '10p' example.txt
	```

	* 打印包含`root`的行

	```shell
		sed '/root/p' example.txt
	```

	* 打印10到20行之间的内容

	```shell
		sed '10,20p' example.txt
	```

	* 打印从包含`root`的行作为开始，到包含`end`的行作为结束之间的所有内容

	```
		sed '/root/,/end$/p' example.txt
	```

	* **反向选择**，输出第十行之外的所有行

	```
		sed '10!p' example.txt
	```

	* 输出10-20行之外的其他行

	```
		sed '10,20!p' example.txt
	```

	* 每隔两行进行输出

	```
		sed -n '1~2p' example.txt
	```

#### `a`, 添加命令

`a`命令，在指定行后面增加一行内容

##### 使用示例：

* 在第5行后增加一行内容

	```shell 
		sed '5a ********' sample.txt 
	```

* 在1-5行每一行后面增加一行内容

	```
		sed '1,5a ******' sample.txt
	```

* 在第十行后添加一行，该行内容开头需要四个空格的缩进

	因为默认情况下，`a`命令后会跟一个空格作为分割，所以后面的所有空格都不会添加到行内容中

	所以，当需要再行内容中添加空格时，需要添加一个`/`作为分割

	```
		sed '10a /    new line' sample.txt
	```

#### `i`, 插入命令

`i`命令，在指定行上面插入一行内容

和`a`命令相比较，`i`命令是在行上面增加内容。

#### `c`

将指定行的内容进行替换

#### `d` 删除命令

`d`，将指定行进行删除

##### 使用示例：

* 删除文档中的所有空行

	```
		sed '/^$/d' sample.txt
	```

#### `s`命令

##### 使用示例：

* 将文档中所有的true替换为false

	```
		sed 's/true/false/' sample.txt
	```
* 将每一行中所有的`:`替换为`%`。 **g参数的使用**

	对于替换命令，默认情况只会对每一行第一个匹配的内容进行替换

	如果需要对该行所有匹配的内容进行替换，需要添加`g`

	```
		sed 's/:/%/g' sample.txt
	```

## 高级操作

### `{}`的使用

通过`{}`可以将多个命令一起执行

命令之间通过`;`进行分隔

```
	sed '{20,30d;s/true/false/}' sample.txt
```

### `n`命令

`n` 命令，读取下一行的内容

### `&`

`&`可以用于代替前面输入的字符串

* 将`pwd`替换为`pwd:  `

	```
		sed 's/pwd/&:  /' sample.txt
	```

* 将所有的`word`首字母进行大小写转换

	`\u`将一个字符转为大写

	`\U`将所有字符转为大写

	```
		sed 's/word/\u&' sample.txt
	```

### `()` 分组

通过`()`可以将匹配内容进行分组

* 将整行内容用ip地址替换
	
	```
	ifconfig en0 | sed -n '/inet /p' | sed 's/inet \([0-9.]*\).*/\1/'
	```


***

`example.txt`

```
```